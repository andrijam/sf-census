!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define("queue",r):n.queue=r()}(this,function(){"use strict";function n(){}function r(r){function e(){if(!c)for(;c=p&&r>s;){var n=h+s,e=w[n],t=e.length-1,o=e[t];w[n]=u,--p,++s,e[t]=i(n),o.apply(null,e)}}function i(n){return function(r,t){if(w[n]!==u)throw new Error;w[n]=null,--s,++h,null==a&&(null!=r?(a=r,p=NaN,f()):(w[n]=t,p?e():s||f()))}}function f(){null!=a?d(a):m?d(null,w):d.apply(null,o.concat(w))}if(!(r>=1))throw new Error;var l,c,a,w=[],p=0,s=0,h=0,d=n,m=!0;return l={defer:function(r){if(d!==n)throw new Error;var u=t.call(arguments,1);return u.push(r),w.push(u),++p,e(),l},await:function(r){if(d!==n)throw new Error;return d=r,m=!1,p||s||f(),l},awaitAll:function(r){if(d!==n)throw new Error;return d=r,m=!0,p||s||f(),l}}}function e(n){return r(arguments.length?+n:1/0)}var t=[].slice,u={},o=[null];return e.version="1.1.1",e});